[tox]
envlist = py27
skipsdist = true

[flake8]
putty-ignore =
    cms/bin/generate_static_pages.py : A107,A301,A302,E501
    cms/bin/test_server.py : A101,A107,A302,E501,F401
    cms/bin/translate.py : A107,A301,A302,E501,F821
    cms/converters.py : A302, N802, A206
    cms/sources.py : A104,A107,A108,A206,A302,E501
    cms/utils.py : A107,A302,E501

[testenv]
setenv = 
    PYTHONPATH = {toxinidir}

deps =
    flask
    pytest
    jinja2
    urllib3
    markdown
    pytest-mock
    wsgi_intercept
    # flake8-putty is not yet compatible with flake8 3.0
    flake8==2.*
    flake8-putty
    pep8-naming
    hg+https://hg.adblockplus.org/codingtools#egg=flake8-eyeo&subdirectory=flake8-eyeo

commands =
    py.test tests
    flake8 cms tests runserver.py
    flake8 --ignore E501,F821,N802 runserver.spec
